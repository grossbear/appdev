#include <stdio.h>
#include "appwin.inc"
#include "appbase.h"


ApplicationBase * ApplicationBase::app = NULL;
///////////////////////////////////////////////////////////////////////////////
ApplicationBase * ApplicationBase::CreateSingleton()
{
    if(app == NULL)
        app = new ApplicationBase();
    
    return app;
}

///////////////////////////////////////////////////////////////////////////////
ApplicationBase * ApplicationBase::GetSingleton()
{
    return app;
}

///////////////////////////////////////////////////////////////////////////////
ApplicationBase::ApplicationBase():
running(false), window(NULL)
{

}

///////////////////////////////////////////////////////////////////////////////
ApplicationBase::~ApplicationBase()
{
    delete(window);
    window = NULL;
}

///////////////////////////////////////////////////////////////////////////////
void ApplicationBase::Init()
{
    printf("ApplicationBase Init\n");
    window = new AppWindow(0,0,640,480,"AppBase");
    running = window->WindowAvailable();
}

///////////////////////////////////////////////////////////////////////////////
void ApplicationBase::Release()
{
    printf("ApplicationBase Release\n");
}

///////////////////////////////////////////////////////////////////////////////
void ApplicationBase::Run()
{
    while(running)
    {
        window->ProcessEvents();
        this->Render();
    }
}

///////////////////////////////////////////////////////////////////////////////
void ApplicationBase::Render()
{
    //printf("AppBase Render\n");
}

///////////////////////////////////////////////////////////////////////////////
void ApplicationBase::CloseWindow()
{
    running = false;
    //delete (window);
    //window = NULL;
}

///////////////////////////////////////////////////////////////////////////////
void ApplicationBase::SetWindowSize(int x, int y)
{
    printf("Window size: x = %d, y = %d\n", x, y);
}

///////////////////////////////////////////////////////////////////////////////
